\section{Population command and subcommand syntax\label{sec:population-syntax}}

\subsection{Model structure}

\defCom{Structure}{Define the spatial and population model structure, annual cycle and model years}

\defSub{CellShape}{The shape of the cells in the spatial grid}
\defType{String}
\defDefault{Square}
\defValue{Either \argument{Square} or \argument{Hexagon}}

\defSub{CellLength}{The length (distance) of one side of a cell}
\defType{Constant}
\defDefault{1}
\defValue{A positive real number}

\defSub{Nrows}{The number of rows $n_{rows}$ in the spatial structure}
\defType{integer}
\defDefault{None}
\defValue{A positive integer, $n_{rows} > 0$}

\defSub{Ncols}{The number of columns $n_{cols}$ in the spatial structure}
\defType{integer}
\defDefault{None}
\defValue{A positive integer, $n_{cols} > 0$}

\defSub{Layer}{The label for the base layer}
\defType{string}
\defDefault{None}
\defValue{Must be a label of a layer defined by \command{Layer}}

\defSub{Categories} {Labels of the categories (rows) of the population component of the partition}
\defType{Vector of strings, of length $1\ldots n_{categories}$}
\defDefault{None}
\defValue{Names of categories must be unique}

\defSub{MinAge}{Minimum age of the population}
\defType{Integer}
\defDefault{None}
\defValue{A non-negative integer, ${Age}_{min}\geq 0$ and ${Age}_{min}\leq {Age}_{max}$}

\defSub{MaxAge}{Maximum age of the population}
\defType{Integer}
\defDefault{None}
\defValue{A non-negative integer, ${Age}_{max}\geq 0$ and ${Age}_{min}\geq {Age}_{min}$}

\defSub{PlusGroup}{Define the largest age/size as a plus group}
\defType{switch}
\defDefault{True}
\defValue{Defines  the largest age/size as a plus group}

\defSub{InitialisationPhases}{Define the labels of the phases of the initialisation}
\defType{Vector of strings, of length of the number of initialisation phases}
\defDefault{None}
\defValue{A valid label defined by \command{InitialisationPhases}}

\defSub{InitialYear}{Define the first year of the model, immediately following initialisation}
\defType{Integer}
\defDefault{None}
\defValue{Defines the first year of the model, $\geq 1$, e.g. 1990}

\defSub{CurrentYear}{Define the current year of the model}
\defType{Integer}
\defDefault{None}
\defValue{Defines the current year of the model, i.e., the model is run from \commandsub{Structure}{.FirstYear}\ to \commandsub{Structure}{.CurrentYear}}

\defSub{FinalYear}{Define the final year of the model in projections}
\defType{Integer}
\defDefault{None}
\defValue{Defines the final year of the model for use in projections, i.e., the model is run from \commandsub{Structure}{.FirstYear} to \commandsub{Structure}{.CurrentYear}, then projected to \commandsub{Structure}{.FinalYear}}

\defSub{TimeSteps} {Define the \command{TimeStep} labels (in order that they are applied) to form the annual cycle}
\defType{String vector}
\defDefault{None}
\defValue{Defines the labels of the time steps that are run in each year}

\defComLab{InitialisationPhase}{Define the processes and years of the initialisation phase with label}

\defSub{Years} {Define the number of years to run}
\defType{Integer}
\defDefault{None}
\defValue{A non-negative integer}

\defSub{Processes} {Define the processes (in order of occurrence) to run in each year of the initialisation}
\defType{String vector}
\defDefault{None}
\defValue{A valid process label}

\defComLab{TimeStep} {Define a time step with label}

\defSub{Process} {Define the process labels, in the order that they are applied, for the time step}
\defType{String vector}
\defDefault{None}
\defValue{Defines the labels of the processes for that time step}

\subsection{Processes}

There are a number of processes that are defined by \SPM, including 

\begin{itemize}
	\item Ageing process
	\item Constant recruitment process
	\item Beverton-Holt stock-recruit relationship recruitment process
	\item Mortality rate process
	\item Mortality event process
	\item Category transition process
	\item Category shift process
	\item Preference movement process
\end{itemize}

Each of the different types of process require different subcommands and arguments.

\defComLab{AgeingProcess} {Define an ageing process with label}

\defSub{Categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\defComLab{ConstantRecruitmentProcess} {Define a constant recruitment process}

\defSub{R0} {Define the total amount of recruitment at equilibrium abundance levels}
\defType{Estimable}
\defDefault{None}
\defValue{Total amount (in numbers) of recruitment applied across all categories at equilibrium abundances}

\defSub{Categories} {Define the categories into which recruitment occurs}
\defType{String vector}
\defDefault{None}
\defValue{Must be a valid category from \commandsub{ModelStructure}{.Categories}}

\defSub{Proportions} {Define the proportion of recruitment that occurs into each category}
\defType{Estimable vector of length \commandsub{ConstantRecruitment}{[label].categories}}
\defDefault{None}
\defValue{Proportion of the annual recruitment that is applied to each category}

\defSub{Ages} {Define the ages within each category that receive recruitment}
\defType{Integer}
\defDefault{None}
\defValue{The age classes that receive recruitment}

\defSub{Layer} {Name of the layer used to determine where recruitment occurs}
\defType{String}
\defDefault{None}
\defValue{A valid layer as defined by \command{Layer}. If a numeric layer, then recruitment is in proportion to the layer values. If a logical layer, then recruitment occurs in cells where the layer value is \texttt{TRUE}}

\defComLab{BHRecruitmentProcess}{Define a Beverton-Holt recruitment process}

\defSub{R0} {Define the total amount of recruitment at equilibrium abundance levels}
\defType{Estimable}
\defDefault{None}
\defValue{Total amount (in numbers) of recruitment applied across all categories at equilibrium abundances}

\defSub{Categories} {Define the categories into which recruitment occurs}
\defType{String vector}
\defDefault{None}
\defValue{Must be a valid category from \commandsub{ModelStructure}{.Categories}}

\defSub{Proportions} {Define the proportion of recruitment that occurs into each category}
\defType{Estimable vector of length \commandsub{Process}{[label].Categories}}
\defDefault{None}
\defValue{Proportion of the annual recruitment that is applied to each category}

\defSub{Ages} {Define the age within each category that receive recruitment}
\defType{Integer}
\defDefault{None}
\defValue{The age classes that receive recruitment}

\defSub{Steepness} {Define the Beverton-Holt stock recruitment relationship steepness ($h$) parameter}
\defType{Estimable}
\defDefault{None}
\defValue{Steepness value between 0.2 and 1.0}

\defSub{SigmaR} {Define the recruitment variability $\sigma_R$ in the stock-recruitment relationship}
\defType{Estimable}
\defDefault{None}
\defValue{...}

\defSub{Rho} {Define the autocorrelation $\rho$ in the recruitment variability in the stock-recruitment relationship}
\defType{Estimable}
\defDefault{None}
\defValue{...}

\defSub{SSB} {Define the label of the \command{DerivedParameter} that defines the SSB}
\defType{String}
\defDefault{None}
\defValue{Must be a valid \command{DerivedParameter} label}

\defSub{YCS-Values} {YCS values}
\defType{Estimable vector}
\defDefault{None}
\defValue{Must be vector of length equal to \commandsub{BHRecruitmentProcess}{[label].YCS-Years}}
\defNote{Special values can be used here, i.e., mean, all}

\defSub{YCS-Years} {Years for YCS values}
\defType{Integer vector}
\defDefault{None}
\defValue{Must be vector of that specifies the years of \commandsub{BHRecruitmentProcess}{[label].YCS-Values}}
\defNote{Special year ranges (YYYY-YYYY) can be used}

\defSub{Layer} {Name of the layer used to determine where recruitment occurs}
\defType{String}
\defDefault{None}
\defValue{A valid layer as defined by \command{Layer}. If a numeric layer, then recruitment is in proportion to the layer values. If a logical layer, then recruitment occurs in cells where the layer value is \texttt{TRUE}}

\defComLab{MortalityRateProcess} {Define a mortality rate process with label}

\defSub{Categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\defComLab{MortalityEventProcess} {Define a mortality event process with label}

\defSub{Categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\defComLab{CategoryTransitionProcess} {Define a category transition process with label}

\defSub{Categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\defComLab{CategoryMoveProcess} {Define a category shift process with label}

\defSub{Categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\defComLab{PreferenceMovementProcess} {Define a preference function movement process with label}

\defSub{Categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\subsection{Preference functions}

\defComLab{PreferenceFunction} {Define a preference function with label}

\subsection{Layers}

\defComLab{Layer} {Define a layer with label}

\defSub{Type} {Define the type of layer}
\defType{String}
\defDefault{None}
\defValue{Either \argument{categorical}, \argument{numeric}, \argument{logical}, or \argument{meta-layer}. If \argument{numeric}, then all values must be non-negative real numbers. If \argument{logical}, then all positive real numbers are interpreted as \texttt{TRUE} and otherwise false. If \argument{meta-layer}, then use subcommands \subcommand{value} and \subcommand{year} to specify the layers to use if each year}

\defSub{Type} {Define the type of layer}
\defType{String}
\defDefault{None}
\defValue{Either \argument{categorical}, \argument{numeric}, or \argument{logical}. If numeric, then all values must be non-negative real numbers. If logical, then all positive real numbers are interpreted as \texttt{TRUE} and otherwise false.}

\defSub{Row$x$} {Define the values of the layer for row $x$}
\defType{Either constant vector (if \subcommand{type} is numeric or logical), or string vector (if \subcommand{type} is \argument{categorical})}
\defDefault{None}
\defValue{A vector of values of length equal to the number of columns defined for the spatial structure. There must be exactly $x$ rows defined, one for each row of the spatial structure}

\defSub{Year} {Define the years for \argument{meta-layer}}
\defType{Constant vector, with values for each year of the model}
\defDefault{None}

\defSub{Value} {Define the layer labels for each of the years for \argument{meta-layer}}
\defType{Constant vector, with values for each \argument{year} specified}
\defDefault{None}


\subsection{Derived quantities}

\defComLab{DerivedQuantity} {Define a derived quantity with label}

\defSub{Categories} {Define the categories are used to calculate the derived quantity}
\defType{String vector}
\defDefault{None}
\defValue{A valid category from \commandsub{ModelStructure}{.Categories}}

\defSub{Selectivity} {Define the selectivities}
\defType{String vector}
\defDefault{None}
\defValue{A valid selectivity label from \command{Selectivity}}

\defSub{TimeStep} {Define the time step at the end of which, the derived quantity is calculated}
\defType{String vector}
\defDefault{None}
\defValue{A valid selectivity label from \command{TimeStep}}

method uniform
layer Depth
layer\_min  10
layer\_max 600
value\_at\_year\_zero phase2


\subsection{Growth}

\subsection{Selectivities}

\defComLab{ConstantSelectivity} {Define a constant selectivity with label}

\defComLab{VaryingSelectivity} {Define an annually varying selectivity with label}


