\section{Population command and subcommand syntax\label{sec:population-syntax}}

\subsection{Model structure}

\defCom{model}{Define the spatial structure, population structure, annual cycle, and model years}

\defSub{nrows}{The number of rows $n_{rows}$ in the spatial structure}
\defType{Integer}
\defDefault{No default}
\defValue{A positive integer, $n_{rows} > 0$}

\defSub{ncols}{The number of columns $n_{cols}$ in the spatial structure}
\defType{Integer}
\defDefault{No default}
\defValue{A positive integer, $n_{cols} > 0$}

\defSub{layer}{The label for the base layer}
\defType{String}
\defDefault{No default}
\defValue{Must be a label of a \argument{numeric} layer defined by \command{layer}}

\defSub{categories} {Labels of the categories (rows) of the population component of the partition}
\defType{Vector of strings, of length $1\ldots n_{categories}$}
\defDefault{No default}
\defValue{Names of categories must be unique}

\defSub{min\_age}{Minimum age of the population}
\defType{Integer}
\defDefault{No default}
\defValue{A non-negative integer, ${age}_{min}\geq 0$ and ${age}_{min}\leq {age}_{max}$}

\defSub{max\_age}{Maximum age of the population}
\defType{Integer}
\defDefault{No default}
\defValue{A non-negative integer, ${age}_{max}\geq 0$ and ${age}_{min}\geq {age}_{min}$}

\defSub{age\_plus\_group}{Define the largest age as a plus group}
\defType{Switch}
\defDefault{True}
\defValue{Defines  the largest age as a plus group}

\defSub{cell\_length}{The length (distance) of one side of a cell}
\defType{Constant}
\defDefault{1}
\defValue{A positive real number}

\defSub{age\_size}{Define the label of the associated size-at-age relationship for each category}
\defType{Vector of strings, of length $1\ldots n_{categories}$}
\defDefault{No default}
\defValue{Label names must be unique}

\defSub{initialisation\_phases}{Define the labels of the phases of the initialisation}
\defType{Vector of strings, of length of the number of initialisation phases}
\defDefault{No default}
\defValue{A valid label defined by \command{initialisation\_phase}}

\defSub{initial\_year}{Define the first year of the model, immediately following initialisation}
\defType{Integer}
\defDefault{No default}
\defValue{Defines the first year of the model, $\geq 1$, e.g. 1990}

\defSub{current\_year}{Define the current year of the model}
\defType{Integer}
\defDefault{No default}
\defValue{Defines the current year of the model, i.e., the model is run from \commandsub{model}{first\_year}\ to \commandsub{model}{current\_year}}

\defSub{final\_year}{Define the final year of the model in projections}
\defType{Integer}
\defDefault{No default}
\defValue{Defines the final year of the model for use in projections, i.e., the model is run from \commandsub{model}{first\_year} to \commandsub{model}{current\_year}, then projected to \commandsub{model}{final\_year}}

\defSub{time\_steps} {Define the \command{time\_step} labels (in order that they are applied) to form the annual cycle}
\defType{String vector}
\defDefault{No default}
\defValue{Defines the labels of the time steps that are run in each year}

\subsection{Initialisation}

The methods for initialisation available are,

\begin{itemize}
	\item Iterative
\end{itemize}

Each type of initialisation requires a set of subcommands and arguments specific to that type.

\defComLab{initialisation\_phase}{Define the processes and years of the initialisation phase with label}

\defSub{type} {Define the type of initialisation}
\defType{String}
\defDefault{No default}
\defValue{A valid type of initialisation}

\subsubsection[Iterative initialisation]{\commandlabsubarg{initialisation\_phase}{type}{iterative}}

\defSub{years} {Define the number of years to run}
\defType{Integer}
\defDefault{No default}
\defValue{A non-negative integer}

\defSub{processes} {Define the processes (in order of occurrence) to run in each year of the initialisation}
\defType{String vector}
\defDefault{No default}
\defValue{A valid process label, from one of \command{process}}

\subsection{Time steps}

\defComLab{time\_step} {Define a time step with label}

\defSub{processes} {Define the process labels, in the order that they are applied, for the time step}
\defType{String vector}
\defDefault{No default}
\defValue{Defines the labels of the processes for that time step}

\subsection{Processes}

The population processes available are,

\begin{itemize}
	\item Constant recruitment process
  \item Beverton-Holt stock-recruit relationship recruitment process
	\item Ageing process
	\item Constant mortality rate process
	\item Annually varying mortality rate process
	\item Mortality event (as a number) process
	\item Mortality event (as a biomass) process
	\item Category transition process
	\item Category shift process
\end{itemize}

The movement processes available are,

\begin{itemize}
	\item Migration movement
	\item Adjacent cell movement
	\item Preference movement
\end{itemize}

Each type of process requires a set of subcommands and arguments specific to that process.

\defComLab{process} {Define a process with label}

\defSub{type} {Define the type of process}
\defType{String}
\defDefault{No default}
\defValue{A valid type of process}

\subsubsection[Constant recruitment process]{\commandlabsubarg{process}{type}{constant\_recruitment}}

\defSub{r0} {Define the total amount of recruitment at equilibrium abundance levels}
\defType{Estimable}
\defDefault{No default}
\defValue{Total amount (in numbers) of recruitment applied across all categories at equilibrium abundances}

\defSub{categories} {Define the categories into which recruitment occurs}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{proportions} {Define the proportion of recruitment that occurs into each category}
\defType{Estimable vector of length \subcommand{categories}}
\defDefault{No default}
\defValue{Proportion of the annual recruitment that is applied to each category}

\defSub{ages} {Define the ages within each category that receive recruitment}
\defType{Integer vector}
\defDefault{No default}
\defValue{The age classes that receive recruitment}

\defSub{layer} {Name of the layer used to determine where recruitment occurs}
\defType{String}
\defDefault{No default}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then recruitment is in proportion to the layer values. Note that the layer values must be non-negative}

\subsubsection[Beverton-Holt recruitment process]{\commandlabsubarg{process}{type}{bh\_recruitment}}

\defSub{r0} {Define the total amount of recruitment at equilibrium abundance levels}
\defType{Estimable}
\defDefault{No default}
\defValue{Total amount (in numbers) of recruitment applied across all categories at equilibrium abundances}

\defSub{categories} {Define the categories into which recruitment occurs}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{proportions} {Define the proportion of recruitment that occurs into each category}
\defType{Estimable vector of length \commandlabsub{process}{categories}}
\defDefault{No default}
\defValue{Proportion of the annual recruitment that is applied to each category}

\defSub{ages} {Define the age within each category that receive recruitment}
\defType{Integer vector}
\defDefault{No default}
\defValue{The age classes that receive recruitment}

\defSub{steepness} {Define the Beverton-Holt stock recruitment relationship steepness ($h$) parameter}
\defType{Estimable}
\defDefault{1.0}
\defValue{Steepness value between 0.2 and 1.0}

\defSub{sigma\_r} {Define the recruitment variability $\sigma_R$ in the stock-recruitment relationship for projections}
\defType{Estimable}
\defDefault{1.0}

\defSub{rho} {Define the autocorrelation $\rho$ in the recruitment variability in the stock-recruitment relationship for projections}
\defType{Estimable}
\defDefault{0.0}

\defSub{ssb} {Define the label of the \command{derived\_quantity} that defines the spawning stock biomass (SSB)}
\defType{String}
\defDefault{No default}
\defValue{Must be a valid \command{derived\_quantity} label}

\defSub{ssb\_offset} {Define the offset (in years) for the year of the derived quantity that is to be applied as the SSB in the stock-recruit relationship}
\defType{Integer}
\defDefault{No default}
\defValue{Must be a value $\ge 0$}

\defSub{ycs\_values} {YCS values}
\defType{Estimable vector}
\defDefault{No default}
\defValue{Must be vector}
\defNote{Special values can be used here, i.e., mean, all}

\defSub{ycs\_years} {Years for year class strength values}
\defType{Integer vector}
\defDefault{No default}
\defValue{Must be vector of length \subcommand{YCS\_values}}
\defNote{Special year ranges (YYYY-YYYY) can be used}

\defSub{standardise\_ycs\_year\_range} {Years for which the year class strength values are defined to have mean 1.0}
\defType{Integer vector of length 2}
\defDefault{No default}
\defValue{Must be vector of length 2, with values of years between \commandsub{model}{initial} to \commandsub{model}{current}}

\defSub{layer} {Name of the layer used to determine where recruitment occurs}
\defType{String}
\defDefault{No layer}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then recruitment is in proportion to the layer values.}

\subsubsection[Ageing process]{\commandlabsubarg{process}{type}{ageing}}

\defSub{categories} {Define the categories that ageing is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\subsubsection[Constant mortality rate process]{\commandlabsubarg{process}{type}{constant\_mortality\_rate}}

\defSub{m} {Define the constant mortality rate to be applied}
\defType{Estimable}
\defDefault{No default}
\defValue{A real number $\ge 0$ and $\le 1$}

\defSub{categories} {Define the categories that mortality is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels defined by \command{selectivity}}

\defSub{layer} {Name of the layer}
\defType{String}
\defDefault{No layer}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then mortality applied is the mortality rate times the value of the layer. Note that the layer values must be non-negative}

\subsubsection[Annual mortality rate process]{\commandlabsubarg{process}{type}{annual\_mortality\_rate}}

\defSub{years} {Define the years when the mortality rates are applied}
\defType{Constant vector}
\defDefault{No default}
\defValue{Valid model years}

\defSub{m} {Define the mortality rate to be applied for each year}
\defType{Estimable vector}
\defDefault{No default}
\defValue{A real number $\ge 0$ and $\le 1$}

\defSub{categories} {Define the categories that mortality is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels defined by \command{selectivity}}

\defSub{layer} {Name of the layer}
\defType{String}
\defDefault{No layer}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then mortality applied is the mortality rate times the value of the layer. Note that the layer values must be non-negative}

\subsubsection[Event mortality process]{\commandlabsubarg{process}{type}{event\_mortality}}

\defSub{categories} {Define the categories that the event mortality is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{years} {Define the years where the mortality even is applied}
\defType{Integer vector}
\defDefault{No default}
\defValue{Valid years for the model}

\defSub{layers} {Define the layers that specify the event mortality (as the abundance) in each year}
\defType{String vector, of length years}
\defDefault{No default}
\defValue{Valid layers defined by \command{layer}. Note that the layer values must be non-negative}

\defSub{u\_max}{Define the maximum exploitation rate}
\defType{Estimable}
\defDefault{0.99}
\defValue{Must be $> 0$ and $< 1$}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels defined by \command{selectivity}}

\defSub{penalty} {Define the event mortality penalty label}
\defType{String}
\defDefault{No default}
\defValue{Valid penalty label defined by \command{penalty}}

\subsubsection[Biomass event mortality process]{\commandlabsubarg{process}{type}{biomass\_event\_mortality}}

\defSub{categories}{Define the categories that the event mortality is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{age\_size}{Define the age-weight relationships for each of the categories that the event mortality is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid labels from \command{age\_size}}

\defSub{years}{Define the years where the mortality event is applied}
\defType{Integer vector}
\defDefault{No default}
\defValue{Valid years for the model}

\defSub{layers}{Define the layers that specify the event mortality (as a biomass) in each year}
\defType{String vector, of length years}
\defDefault{No default}
\defValue{Valid layers defined by \command{layer}. Note that the layer values must be non-negative}

\defSub{u\_max} {Define the maximum exploitation rate}
\defType{Constant}
\defDefault{0.99}
\defValue{Must be $> 0$ and $< 1$}

\defSub{selectivities}{Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels defined by \command{selectivity}}

\defSub{penalty} {Define the event mortality penalty label}
\defType{String}
\defDefault{No default}
\defValue{Valid penalty label defined by \command{penalty}}

\subsubsection[Category transition process]{\commandlabsubarg{process}{type}{category\_transition}}

\defSub{from} {Define the categories that are the source of the transition process}
\defType{String vector}
\defDefault{No default}
\defValue{A valid list of categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to the source categories}
\defType{String vector}
\defDefault{No default}
\defValue{A valid list of selectivity labels defined by \command{selectivity}}

\defSub{to} {Define the categories that are the sink of the transition process}
\defType{String vector}
\defDefault{No default}
\defValue{A valid list of categories from \commandsub{model}{categories}}

\defSub{years} {Define the years where the category transition is applied}
\defType{Integer vector}
\defDefault{No default}
\defValue{Valid years for the model}

\defSub{layers} {Define the layers that specify the event mortality (as N for each cell) in each year}
\defType{String vector}
\defDefault{No default}
\defValue{Valid layers defined by \command{layer}. Note that the layer values must be non-negative}

\defSub{penalty} {Define the penalty to encourage models parameter values away from those which result in not enough individuals to move}
\defType{String}
\defDefault{No default}
\defValue{Valid penalty label defined by \command{penalty}}

\subsubsection[Category transition rate process]{\commandlabsubarg{process}{type}{category\_transition\_rate}}

\defSub{from} {Define the category that is the source of the transition process}
\defType{String}
\defDefault{No default}
\defValue{A valid category from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to the source categories}
\defType{String vector}
\defDefault{No default}
\defValue{A valid list of selectivity labels defined by \command{selectivity}}

\defSub{to} {Define the category that is the sink of the transition process}
\defType{String}
\defDefault{No default}
\defValue{A valid category from \commandsub{model}{categories}}

\defSub{proportions} {Define the proportion of individuals to move}
\defType{Estimable}
\defDefault{No default}
\defValue{A value $\ge 0$ and $\le 1$}

\defSub{layer} {Name of the layer}
\defType{String}
\defDefault{No default}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then rate applied to each cell is multiplied by the value of the layer. Note that the layer values must be non-negative}

\subsubsection[Migration movement]{\commandlabsubarg{process}{type}{migration\_movement}}

\defSub{categories} {Define the categories that the migration movement event is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{source\_layer} {Define the label of a layer that defines the source cells of the migration movement event}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{sink\_layer} {Define the label of a layer that defines the sink cells of the migration movement event}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{proportions} {Define the constant multiplier for the proportions that migrate}
\defType{Estimable}
\defDefault{1.0}
\defValue{A real number between 0 and 1, inclusive}

\defSub{layer} {Name of the layer}
\defType{String}
\defDefault{No default}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then rate applied to each cell is multiplied by the value of the layer.}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels defined by \command{selectivity}}

\subsubsection[Adjacent cell movement]{\commandlabsubarg{process}{type}{adjacent\_cell\_movement}}

Not yet implemented. No subcommands have been defined.

\subsubsection[Preference movement]{\commandlabsubarg{process}{type}{preference}}

\defSub{categories} {Define the categories that the preference function movement is applied to}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{preference\_functions} {Define the labels of the individual  preference functions that make up the total preference function}
\defType{String vector}
\defDefault{No default}
\defValue{Valid preference function labels defined by \command{preference\_function}}

\subsection{Preference functions}

The individual preference functions available are,

\begin{itemize}
	\item Constant
	\item Normal
	\item Double-normal
	\item Logistic
	\item Inverse logistic
	\item Exponential
	\item Threshold
	\item Threshold-biomass
\end{itemize}

Each type of preference function requires a set of subcommands and arguments specific to that function.

\defComLab{preference\_function} {Define a preference function with label}

\defSub{type} {Define the type of preference function}
\defType{String}
\defDefault{No default}
\defValue{A valid type of preference function}

\subsubsection[Constant]{\commandlabsubarg{preference\_function}{type}{constant}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Normal]{\commandlabsubarg{preference\_function}{type}{normal}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{mu} {Defines the $\mu$ parameter of the normal preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{sigma} {Defines the $\sigma$ parameter of the normal preference function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Double-normal]{\commandlabsubarg{preference\_function}{type}{double\_normal}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{mu} {Defines the $\mu$ parameter of the double-normal preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{sigma\_l} {Defines the $\sigma_L$ parameter of the double-normal preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{sigma\_r} {Defines the $\sigma_R$ parameter of the double-normal preference function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Logistic]{\commandlabsubarg{preference\_function}{type}{logistic}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{a50} {Defines the $a_{50}$ parameter of the logistic preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{ato95} {Defines the $a_{to95}$ parameter of the logistic preference function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Inverse-logistic]{\commandlabsubarg{preference\_function}{type}{inverse\_logistic}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{a50} {Defines the $a_{50}$ parameter of the inverse-logistic preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{ato95} {Defines the $a_{to95}$ parameter of the inverse-logistic preference function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Exponential]{\commandlabsubarg{preference\_function}{type}{exponential}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{lambda} {Defines the $\lambda$ parameter of the exponential preference function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Threshold]{\commandlabsubarg{preference\_function}{type}{threshold}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{categories} {Define the categories are used to calculate the abundance}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{n} {Defines the $N$ parameter of the threshold preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{lambda} {Defines the $\lambda$ parameter of the threshold preference function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Threshold-biomass]{\commandlabsubarg{preference\_function}{type}{threshold\_biomass}}

\defSub{layer} {Defines the layer which supplies the preference function independent variable}
\defType{String}
\defDefault{No default}
\defValue{A valid layer defined by \command{layer}}

\defSub{categories} {Define the categories are used to calculate the biomass}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{age\_size}{Define the age-weight relationships for each of the categories that the biomass is calculated from}
\defType{String vector}
\defDefault{No default}
\defValue{Valid labels from \command{age\_size}}

\defSub{alpha} {Defines the multiplicative constant $\alpha$}
\defType{Estimable}
\defDefault{No default}

\defSub{biomass} {Defines the $B$ biomass parameter of the threshold biomass preference function}
\defType{Estimable}
\defDefault{No default}

\defSub{lambda} {Defines the $\lambda$ parameter of the threshold biomass preference function}
\defType{Estimable}
\defDefault{No default}

\subsection{Layers}

The available layer types  are,

\begin{itemize}
	\item Numeric
	\item Categorical
	\item Distance
	\item Abundance
	\item Biomass
	\item Abundance-density
	\item Biomass-density
	\item Meta-layer
\end{itemize}

\defComLab{layer} {Define a layer function with label}

\defSub{type} {Define the type of layer}
\defType{String}
\defDefault{No default}
\defValue{A valid type of layer}

\subsubsection[Numeric]{\commandlabsubarg{layer}{type}{numeric}}

\defSub{data} {Define the values of the layer}
\defType{Constant vector, with total length \commandsub{model}{ncols} $\times$ \commandsub{model}{nrows}}
\defDefault{No default}
\defValue{A vector of values of length equal to the number of elements defined for the spatial structure}

\subsubsection[Categorical]{\commandlabsubarg{layer}{type}{categorical}}

\defSub{data} {Define the values of the layer}
\defType{Constant vector, with total length \commandsub{model}{ncols} $\times$ \commandsub{model}{nrows}}
\defDefault{No default}
\defValue{A vector of values of length equal to the number of elements defined for the spatial structure}

\subsubsection[Distance]{\commandlabsubarg{layer}{type}{distance}}

There are no other subcommands for \commandlabsubarg{layer}{type}{distance}.

\subsubsection[Abundance]{\commandlabsubarg{layer}{type}{abundance}}

\defSub{categories} {Define the categories are used to calculate the abundance}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\subsubsection[Biomass]{\commandlabsubarg{layer}{type}{biomass}}

\defSub{categories} {Define the categories are used to calculate the biomass}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{age\_size}{Define the age-weight relationships for each of the categories that the biomass is calculated from}
\defType{String vector}
\defDefault{No default}
\defValue{Valid labels from \command{age\_size}}

\subsubsection[Abundance-density]{\commandlabsubarg{layer}{type}{abundance\_density}}

\defSub{categories} {Define the categories are used to calculate the abundance}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\subsubsection[Biomass-density]{\commandlabsubarg{layer}{type}{biomass\_density}}

\defSub{categories} {Define the categories are used to calculate the biomass}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities applied to each category}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{age\_size}{Define the age-weight relationships for each of the categories that the biomass is calculated from}
\defType{String vector}
\defDefault{No default}
\defValue{Valid labels from \command{age\_size}}

\subsubsection[Meta-layer]{\commandlabsubarg{layer}{type}{meta}}

\defSub{years} {Define the years}
\defType{Constant vector, with values for each year of the model}
\defDefault{No default}

\defSub{layers} {Define the layer labels for each of the years}
\defType{String vector, with values for each \argument{year} specified}
\defDefault{No default}
\defCondition{Listed layers cannot be \commandlabsubarg{layer}{type}{meta\_layer}}

\defSub{initialisation\_layer} {Define the layer label to use during the initialisation}
\defType{String}
\defDefault{No default}
\defCondition{Listed layers cannot be \commandlabsubarg{layer}{type}{meta}}

\subsection{Derived quantities}

The individual types of derived quantities available are,

\begin{itemize}
	\item Abundance
	\item Biomass
\end{itemize}

\defComLab{derived\_quantity} {Define a derived quantity with label}

\defSub{type} {Define the type of derived quantity}
\defType{String}
\defDefault{No default}
\defValue{A valid type of derived quantity}

\subsubsection[Abundance]{\commandlabsubarg{derived\_quantity}{type}{abundance}}

\defSub{categories} {Define the categories are used to calculate the derived quantity}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivity} {Define the selectivities}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{time\_step} {Define the time step at the end of which, the derived quantity is calculated}
\defType{String}
\defDefault{No default}
\defValue{A valid time step label from \command{time\_step}}

\defSub{time\_step\_proportion} {Define the proportion of the time step through which the derived quantity has been calculated}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{layer} {Name of the layer}
\defType{String}
\defDefault{No default}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then value is the sum of the each cell is multiplied by the value of the layer.}

\subsubsection[Biomass]{\commandlabsubarg{derived\_quantity}{type}{biomass}}

\defSub{categories} {Define the categories are used to calculate the derived quantity}
\defType{String vector}
\defDefault{No default}
\defValue{Valid categories from \commandsub{model}{categories}}

\defSub{selectivities} {Define the selectivities}
\defType{String vector}
\defDefault{No default}
\defValue{Valid selectivity labels from \command{selectivity}}

\defSub{time\_step} {Define the time step at the end of which, the derived quantity is calculated}
\defType{String}
\defDefault{No default}
\defValue{A valid time step label from \command{time\_step}}

\defSub{layer} {Name of the layer}
\defType{String}
\defDefault{No default}
\defValue{A valid layer as defined by \command{layer}. If a numeric layer, then value is the sum of the each cell biomass multiplied by the value of the layer.}

\subsection{Size-age relationship}

The individual types of size-at-age relationship available are,

\begin{itemize}
	\item von Bertalanffy
	\item Schnute
\end{itemize}

\defComLab{age\_size} {Define a size-age relationship with label}

\defSub{type} {Define the type of relationship}
\defType{String}
\defDefault{No default}
\defValue{A valid type of size-at-age relationship}

\subsubsection[von Bertalanffy]{\commandlabsubarg{age\_size}{type}{von\_bertalanffy}}

\defSub{linf} {Define the $L_\infty$ parameter of the von Bertalanffy relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{k} {Define the $k$ parameter of the von Bertalanffy relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{t0} {Define the $t_0$ parameter of the von Bertalanffy relationship}
 \defType{Estimable}
\defDefault{No default}
\defValue{A real number}

\defSub{distribution} {Define the distribution of sizes-at-age around the mean}
\defType{String}
\defDefault{Normal}
\defValue{Either normal or lognormal}

\defSub{by\_length} {Specifies if the linear interpolation of c.v.s is a linear function of mean size or of age}
\defType{Logical}
\defDefault{True}
\defValue{If true, the the c.v. is a function of length, else a function of age}

\defSub{cv} {Define the c.v. of the distribution of sizes-at-age around the mean}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{growth\_proportions} {Define the proportion of the year for each time step for evaluating size}
\defType{Constant vector}
\defDefault{No default}
\defValue{A vector of values, $\le1$ of length equal to the number of time steps}

\defSub{size\_weight} {Define the label of the associated size-weight relationship}
\defType{String}
\defDefault{No default}
\defValue{A valid label from \command{size\_weight}}

\subsubsection[Schnute]{\commandlabsubarg{age\_size}{type}{schnute}}

\defSub{y1} {Define the $y_1$ parameter of the Schnute relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{y2} {Define the $y_2$ parameter of the Schnute relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{tau1} {Define the $\tau_1$ parameter of the Schnute relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A real number}

\defSub{tau2} {Define the $\tau_2$ parameter of the Schnute relationship}
\defType{String}
\defDefault{Normal}
\defValue{Either normal or lognormal}

\defSub{a} {Define the $a$ parameter of the Schnute relationship}
\defType{String}
\defDefault{Normal}
\defValue{Either normal or lognormal}

\defSub{b} {Define the $b$ parameter of the Schnute relationship}
\defType{String}
\defDefault{Normal}
\defValue{Either normal or lognormal}

\defSub{by\_length} {Specifies if the linear interpolation of c.v.s is a linear function of mean size or of age}
\defType{Logical}
\defDefault{True}
\defValue{If true, the the c.v. is a function of length, else a function of age}

\defSub{cv} {Define the c.v. of the distribution of sizes-at-age around the mean}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{growth\_proportions} {Define the proportion of the year for each time step for evaluating size}
\defType{Constant vector}
\defDefault{No default}
\defValue{A vector of values, $\le1$ of length equal to the number of time steps}

\defSub{size\_weight} {Define the label of the associated size-weight relationship}
\defType{String}
\defDefault{No default}
\defValue{A valid label from \command{size\_weight}}

\subsection{Size-weight}

The individual types of size-weight relationship available are,

\begin{itemize}
	\item None
	\item Basic
\end{itemize}

\defComLab{size\_weight} {Define a size-weight relationship with label}

\defSub{type} {Define the type of relationship}
\defType{String}
\defDefault{No default}
\defValue{A valid type of size-weight relationship}

\subsubsection[None]{\commandlabsubarg{size\_weight}{type}{none}}

There are no other subcommands for \commandlabsubarg{size\_weight}{type}{none}.

\subsubsection[Basic]{\commandlabsubarg{size\_weight}{type}{basic}}

\defSub{a} {Define the $a$ parameter of the basic relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{b} {Define the $b$ parameter of the basic relationship}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\subsection{Selectivities}

The individual selectivity functions available are,

\begin{itemize}
	\item Constant
	\item Knife-edge
	\item All-values
	\item All-values-bounded
	\item Increasing
	\item Logistic
	\item Logistic-producing
	\item Double-normal
	\item Double-exponential
\end{itemize}

Each type of selectivity function requires a set of subcommands and arguments specific to that function.

\defComLab{selectivity} {Define a selectivity function with label}

\defSub{type} {Define the type of selectivity function}
\defType{String}
\defDefault{No default}
\defValue{A valid type of selectivity function}

\subsubsection[Constant]{\commandlabsubarg{selectivity}{type}{constant}}

\defSub{c} {Defines the $C$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\subsubsection[Knife-edge]{\commandlabsubarg{selectivity}{type}{knife\_edge}}

\defSub{e} {Defines the $E$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\subsubsection[All-values]{\commandlabsubarg{selectivity}{type}{all\_values}}

\defSub{v} {Defines the $V$ parameters (one for each age class) of the selectivity function}
\defType{Estimable vector}
\defDefault{No default}
\defValue{A vector of positive real numbers, of length equal to the number of age classes}

\subsubsection[All-values-bounded]{\commandlabsubarg{selectivity}{type}{all\_values\_bounded}}

\defSub{l} {Defines the $L$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}
\defValue{A positive real number}

\defSub{h} {Defines the $H$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}
\defValue{A positive real number, must be greater than $L$}

\defSub{v} {Defines the $V$ parameters (one for each age class from $L$ to $H$) of the selectivity function}
\defType{Estimable vector}
\defDefault{No default}
\defValue{A vector of positive real numbers, of length equal to the number of age classes from $L$ to $H$}

\subsubsection[Increasing]{\commandlabsubarg{selectivity}{type}{increasing}}

\defSub{alpha} {Defines the $\alpha$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{l} {Defines the $L$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}
\defValue{A positive real number}

\defSub{h} {Defines the $H$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}
\defValue{A positive real number, must be greater than $L$}

\defSub{v} {Defines the $V$ parameters (one for each age class from $L$ to $H$) of the selectivity function}
\defType{Estimable vector}
\defDefault{No default}
\defValue{A vector of positive real numbers, of length equal to the number of age classes from $L$ to $H$}

\subsubsection[Logistic]{\commandlabsubarg{selectivity}{type}{logistic}}

\defSub{alpha} {Defines the $\alpha$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{a50} {Defines the $a_{50}$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{ato95} {Defines the $a_{to95}$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\subsubsection[Logistic producing]{\commandlabsubarg{selectivity}{type}{logistic\_producing}}

\defSub{alpha} {Defines the $\alpha$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{l} {Defines the $L$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}
\defValue{A positive real number}

\defSub{h} {Defines the $H$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}
\defValue{A positive real number, must be greater than $L$}

\defSub{a50} {Defines the $a_{50}$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{ato95} {Defines the $a_{to95}$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\subsubsection[Double-normal]{\commandlabsubarg{selectivity}{type}{double\_normal}}

\defSub{alpha} {Defines the $\alpha$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{mu} {Defines the $\mu$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\defSub{sigma\_l} {Defines the $\sigma_L$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\defSub{sigma\_r} {Defines the $\sigma_R$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\subsubsection[Double-exponential]{\commandlabsubarg{selectivity}{type}{double\_exponential}}

\defSub{alpha} {Defines the $\alpha$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}
\defValue{A positive real number}

\defSub{x1} {Defines the $x_1$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}

\defSub{x2} {Defines the $x_2$ parameter of the selectivity function}
\defType{Integer}
\defDefault{No default}

\defSub{x0} {Defines the $x_0$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\defSub{y0} {Defines the $y_0$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\defSub{y1} {Defines the $y_1$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\defSub{y2} {Defines the $y_2$ parameter of the selectivity function}
\defType{Estimable}
\defDefault{No default}

\defComLab{joint\_selectivity} {Define a joint selectivity}

\defSub{selectivities} {Define the labels of the selectivities to be defined as 'joint'}
\defType{String vector}
\defDefault{No default}
\defValue{Valid \command{selectivity} labels}
