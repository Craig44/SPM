\section{Model overview\label{sec:overview}}\index{Model overview}

\subsection{Introduction}

The \SPMName\ (\SPM) is a generalised spatially explicit age-structured population dynamics and movement model. It allows the implementation of population models suitable for the simulation and estimation of parameters in models with a large number of areas. It implements a statistical catch-at-age population dynamics and movement model, using a discrete time-step state-space model that represents a cohort-based population age structure in a spatially explicit manner. 

The basic structure \index{Structure} of the model is defined in terms of the \emph{state}\index{State}. The state consists of two parts, the \emph{partition}\index{Partition} and \emph{derived quantities}\index{Derived quantities}. The state will typically change one or more times in every \emph{time step} of every year, depending on the \emph{processes} defined for each model. 

 The partition is a representation of the population at an instance in time, and is a matrix of the numbers of individuals within each spatial cell, age, and category. A derived quantity is a cumulative summary of the partition at some point in time. Unlike the partition (which is updated as each new process is applied), each derived quantity records a single value for each year of the model run. Hence, derived quantities build up a vector of values over the model run years. For example, the numbers of individuals in a category labelled mature at some point in the annual cycle may be a derived quantity. Hence, the state is the combination of the partition and the derived quantities at some instance in time. Changes to the partition occur by the application of \emph{processes}\index{Processes}. Additions to the vectors of derived quantities occur when the model is requested to add a value to each derived quantity vector. 

The application of processes within each year is controlled by the \emph{annual cycle}\index{Annual cycle}. This defines what processes happen in each model year, and in what sequence. Further, each year is split up into one or more \emph{time steps}\index{Time steps} (with at least one process occurring in each time step). You can think of each time step as representing a particular part of the calendar year, or you can just treat them as an abstract sequence of events.

The division of the year into an arbitrary number of time steps allows the user to specify the exact order in which processes occur and when observations are evaluated. The user specifies the time steps, their order, and the processes within each time step. If more than one process occurs in the same time step, then the occur in the order that they are specified. Observations are always evaluated at the end of a time step. Hence, time steps can be used to break processes into groups, and assist in defining the timing of the observations within the annual cycle. 

An \SPM\ model can be parametrised by both population processes\index{Processes} (for example, ageing, recruitment, and mortality) and movement processes. Movement is by either adjacent cell movements, between cell migrations, or by global movements parametrised as a function of known attributes at each spatial location (termed preference functions --- see later). \SPM\ is designed to be flexible and to allow for the estimation of both population and movement parameters from local or aggregated spatially explicit observations. 

The population structure of \SPM\ follows the usual population modelling conventions and is similar to those implemented in other population models, for example CASAL\index{CASAL}  \citep{1388}. The model records the numbers of individuals by age and category (e.g., male, female), as well as the locations of these cohorts within a spatial grid. In general, cohorts are added via a recruitment event, are aged annually, and are removed from the population via various forms of mortality. The population is assumed to be closed (i.e., no immigration or emigration from the modelled area)

The spatial component of \SPM\ is designed to allow parametrise movement cohorts and groups of individuals between spatial locations, and hence allow movement parameters to be estimated by incorporating spatially explicit observations. 

A model is implemented in \SPM\ using an \config \index{Input configuration file}, which is a complete description of the model structure (i.e., spatial and population processes), observations, estimation methods, and reports (outputs) requested. \SPM\ runs from a command prompt window in Microsoft Windows or from a text terminal in Linux. A model can be either \emph{run}, estimable parameters can be \emph{estimated} or \emph{profiled}, \emph{MCMC} distributions calculated, and these estimates can be \emph{projected} into the future or used as an operating model to \emph{simulate} observations.

This section gives a quick overview of the model, and how to use it. Detailed descriptions of the components of \SPM, the model structures, mathematical equations used, and command and subcommand arguments are given in the following sections.

A model in \SPM\ is specified by an \config, and comprises of four main components. These are the population section (model structure, population and spatial dynamics, etc.), the estimation section (methods of estimation and the parameters to be estimated), the observation section (observational data and associated likelihoods), and the report section (printouts and reports from the model). These \config\ completely describe a model implemented in \SPM. See Sections \ref{sec:population-syntax}, \ref{sec:estimation-syntax}, \ref{sec:observation-syntax}, and \ref{sec:report-syntax} for details and specification of \SPM s command and subcommand syntax within the \config. 

\subsection{\I{The population section}}

The population section\index{Population section} (Section \ref{sec:population-section}) defines the model of the movement and population dynamics. It describes the model structure (both the spatial and population structure), defines the population and movement processes (for example, recruitment, migration, and mortality), layers (the known attributes of each spatial cell), selectivities, and key population parameters.

\subsection{\I{The estimation section}}

The estimation section\index{Estimation section} specifies the parameters parameters to be estimated\index{Estimated parameters}, estimation methods, penalties and priors. Estimation is based on an objective function (e.g., negative log posterior). Depending on the run mode, the estimation section is used to specify the methods for finding a point estimate (i.e., the set of parameter values that minimizes the objective function), doing profiles, or MCMC methods and options, etc.

Further, the estimation section specifies the parameters to be estimated within each model run and the estimation methods. The estimation section specifies the choice of estimation method, which parameters are to be estimated, priors, starting values, and minimiser control values.

Penalties and priors act as constraints on the estimation. They can either encourage or discourage (depending on the specific implementation) parameter estimates that are `near' some value, and hence influence the estimation process. For example, the catch-limit penalties can be used to discourage parameter estimates that lead to models where the recorded catch was unable to be fully taken.

\subsection{\I{The observation section}}

Types of observations, their values, and the associated error structures are defined in the observation section. Observations are data which allow us to make inferences about unknown parameters. The observation section\index{Observation section} specifies the observations, their errors, likelihoods, and when the observations occur. Examples include relative or absolute abundance indices, proportions-at-age frequencies, etc. Estimation uses the observations to find values for each of the estimated parameters so that each observation is `close' (in some mathematical sense) to a corresponding expected value. 

\subsection{\I{The report section}}

The report section\index{Report section} specifies the model outputs. It defines the quantities and model summaries to be output to external files or to the standard output. While \SPM\ will provide informational messages to the screen, the \SPM\ will only produce model estimates, population states, and other data as requested by the report section. Note that if no reports are specified, then no output will be produced.
